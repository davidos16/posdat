<p id="notice"><%= notice %></p>

<h1>Widgets</h1>
<div class="container overflow-scroll mh-75 p-3"> 
  <div class="list-group dash-list">
    
    <% if @widgets.present? %>
    <% @widgets.each do |w| %> 
     <% cache(w) do %>
     
    <div class="list-group-item dash-list-item">
      
      <h3 class="list-group-item-heading"><%= w.name %></h3>
      <p class="list-group-item-text"><%= w.message %></p>
      
      <div class="row">
       <div class="col" data-controller="widget" 
          data-widget-update-url="<%= widget_path(w) %>">
     
                    <div class="form-check form-switch">
                    <input class="form-check-input"  type="checkbox" role="switch" id="toggleSwitchWidgetActive"
                    data-action="widget#toggle" 
                    data-widget-target="active"
                    <% if w.active == true %> checked <% end %>>
                    <label class="form-check-label" for="toggleSwitchWidgetActive">Widget Active</label>
                  </div>
                     
         </div>
         <div class="col" >
         <a href="<%= widget_path(w) %> " class="btn btn-secondary btn-sm float-left"> View settings</a> 
         </div>
         </div>
         
         <div class="row">
        <span><%= link_to 'Show', w %>  </span>
       <span><%= link_to 'Edit', edit_widget_path(w) %></span>
          <span><%= link_to 'Destroy', w, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        </div>
      </tr>
    </div>
    
    
    <% end %> 
    <% end %> 
    
    <% else %> 
    <p class="text-center w-100"> Create your first widget</p>
    <a href="/widgets/new">
    <button type="button" class="btn btn-secondary btn-sm text-center m-auto d-block">New widget 
       <svg xmlns="http://www.w3.org/2000/svg"  fill="none" viewBox="0 0 24 24" stroke="currentColor" style="height: 15px; width: 15px;">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
    </button>
    </a>
    <% end %> 

  </div>
</div>

